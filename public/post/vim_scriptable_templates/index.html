
<!DOCTYPE html>
<html lang="en-US">
	<head>

		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />

		




<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://www.companionway.net/img/vim-dynamic-templates.png" />




<meta name="twitter:title" content="Vim Scriptable Templates" />
<meta name="twitter:description" content="Dynamic vim Templates

Vim (or vi in the anceint past) has been my partner in getting things done. Like an rich tool it
has lots of features that go untapped or undiscovered. A few days ago I decided I wanted a script within
a tempate to help build the &ldquo;front matter&rdquo; to my markdown (.md) files.

The front matter looks like this:

&#43;&#43;&#43;
author = &quot;&quot;
comments = true
date = &quot;2018-07-15 14:45:19&quot;
draft = false
image = &quot;&quot;
share = true
# slug = 
# tags = [ &quot;tag1&quot;, &quot;tag2&quot; ]
title = &quot;vim_scriptable_templates&quot;

&#43;&#43;&#43;


The challenge was to have vim write in the date for me in the needed format. And if you use hugo as your static web site generator as I do
you may have found that it will silently ignore a new markdown file if the date is not formated correctly. It some testing to discover that
but the bottom line is that I needed a way to script it for to avoid mistakes.

Research to me to this tip source:  vim embedded scripts " />



		<meta property="og:title" content=" Vim Scriptable Templates &middot;  companionway" />
		<meta property="og:site_name" content="companionway" />
		<meta property="og:url" content="https://www.companionway.net/post/vim_scriptable_templates/" />

		
		<meta property="og:type" content="article" />
		<meta property="og:article:published_time" content="2018-07-15T14:00:00Z" />
		
		<meta property="og:article:tag" content="vim" />
		
		<meta property="og:article:tag" content="templates" />
		
		<meta property="og:article:tag" content="scripts" />
		
		

		<title>
			 Vim Scriptable Templates &middot;  companionway
		</title>

		<meta name="description" content="Meeting challenges with success!" />
		<meta name="HandheldFriendly" content="True" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="shortcut icon" href="https://www.companionway.net/img/favicon.ico">
		<link rel="apple-touch-icon" href="https://www.companionway.net/img/apple-touch-icon.png" />

		
<link rel="stylesheet" type="text/css" href="https://www.companionway.net/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="https://www.companionway.net/css/nav.css" />
<link rel="stylesheet" type="text/css" href="https://www.companionway.net/css/screen.css" />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

<link rel="stylesheet" type="text/css" href="https://www.companionway.net/css/custom.css" />

		

		
		
		<link href="https://www.companionway.netindex.xml" rel="alternate" type="application/rss+xml" title="companionway" />
		
		
		
		<meta name="generator" content="Hugo 0.54.0" />

		<link rel="canonical" href="https://www.companionway.net/post/vim_scriptable_templates/" />

		
<link ref="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=EB+Garamond" >
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Architects Daughter" >
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Tangerine|Open+Sans:300" >
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Philosopher">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Merriweather">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">



		
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
					m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-6970218-1', 'auto');
            ga('send', 'pageview');
		</script>

        
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-6970218-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-6970218-1');
          gtag('set', {'user_id': 'USER_ID'}); 
        </script>
        

		
	</head>
	<body class="nav-closed">
        
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WXQDJQV"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        

		<div class="nav">
	<h3 class="nav-title">Menu</h3>
	<a href="#" class="nav-close">
		<span class="hidden">Close</span>
	</a>
	<ul>
		

		
		
		<li class="nav-opened" role="presentation">
			<a href="/">Home</a>
		</li>
		
		
		<li class="nav-opened" role="presentation">
			<a href="/post">Posts</a>
		</li>
		
		
		<li class="nav-opened" role="presentation">
			<a href="/page/about/">About</a>
		</li>
		
		
		<li class="nav-opened" role="presentation">
			<a href="/page/dlfiles/">Download Files</a>
		</li>
		
		
		<li class="nav-opened" role="presentation">
			<a href="/page/links/">Links</a>
		</li>
		
		
		<li class="nav-opened" role="presentation">
			<a href="/articles/">Newspaper</a>
		</li>
		
		
		<li class="nav-opened" role="presentation">
			<a href="/page/projects/">Projects</a>
		</li>
		
	</ul>

	
    <a class="subscribe-button icon-feed" href="https://www.companionway.netindex.xml">Subscribe</a>

</div>
<span class="nav-cover"></span>


		<div class="site-wrapper">





	<header class="main-header post-head" style="background-image: url(https://www.companionway.net/img/vim-dynamic-templates.png)">
		
		<nav class="main-nav overlay clearfix">
			

					
					<a class="blog-logo" href="https://www.companionway.net"><img src="https://www.companionway.net/img/sailboat.png" alt="Home" /></a>
					
					
					<a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
					
				</nav>
			</header>


			<main class="content" role="main">



				<article class="post">

					<header class="post-header">
						<h1 class="post-title">
							
							Vim Scriptable Templates
							
						</h1>
						<small></small>

						<section class="post-meta">
							
							<time class="post-date" datetime="2018-07-15T14:00:00Z">
								Jul 15, 2018
							</time>
							
							
							<span class="post-tag small"><a href="https://www.companionway.nettags/vim/">#vim</a></span>
							
							<span class="post-tag small"><a href="https://www.companionway.nettags/templates/">#templates</a></span>
							
							<span class="post-tag small"><a href="https://www.companionway.nettags/scripts/">#scripts</a></span>
							
						</section>
					</header>

					<section class="post-content">
						<h3 id="dynamic-vim-templates">Dynamic vim Templates</h3>

<p>Vim (or vi in the anceint past) has been my partner in getting things done. Like an rich tool it
has lots of features that go untapped or undiscovered. A few days ago I decided I wanted a script within
a tempate to help build the &ldquo;front matter&rdquo; to my markdown (.md) files.</p>

<p>The front matter looks like this:</p>

<pre><code>+++
author = &quot;&quot;
comments = true
date = &quot;2018-07-15 14:45:19&quot;
draft = false
image = &quot;&quot;
share = true
# slug = 
# tags = [ &quot;tag1&quot;, &quot;tag2&quot; ]
title = &quot;vim_scriptable_templates&quot;

+++
</code></pre>

<p>The challenge was to have vim write in the date for me in the needed format. And if you use hugo as your static web site generator as I do
you may have found that it will silently ignore a new markdown file if the date is not formated correctly. It some testing to discover that
but the bottom line is that I needed a way to script it for to avoid mistakes.</p>

<p>Research to me to this tip source: <a href="http://vim.wikia.com/wiki/Use_eval_to_create_dynamic_templates"> vim embedded scripts </a></p>

<p>I use autocommands in vim to load templates. The strategy here is to have vim recognize and respond when I start to write a new
markdown (.md) file and run vim scripts where needed to dynamically fill in needed data. I will start here with writing the
template. All my templates are in a directory I call <code>~/vinrc-files/</code>.  Here is the contents of my .md file template named
<code>~/vimrc-files/vimrc-md.tem</code>:</p>

<pre><code>+++
# author = &quot;-g-&quot;
comments = true
date = &quot;[:VIM_EVAL:]strftime(&quot;%Y-%m-%d %T&quot;)[:END_EVAL:]&quot;
draft = false
# image = &quot;img/myimage&quot;
share = true
# slug = 
# tags = [ &quot;tag1&quot;, &quot;tag2&quot; ]
# Watch the title below and change as you desire
title = &quot;[:VIM_EVAL:]expand(&quot;%:t:r&quot;)[:END_EVAL:]&quot;

+++


</code></pre>

<p>For what it is worth, the inclusion of <code>&lt;!--more--&gt;</code> is hugo&rsquo;s trigger for cutting of a summary block.</p>

<p>Two embedded scripts are here and I will leave it to you to research cypher their workings.</p>

<p>Now within the <code>~/.vimrc</code> file I need two things.</p>

<ul>
<li><p>auto load the template into any .md file that I start to write. The added code looks like this:</p>

<pre><code>autocmd BufNewFile *.md 0r~/vimrc-files/vimrc-md.tem
</code></pre></li>

<li><p>run a process to substiture the embedded vim evaluation code with processed data.</p>

<pre><code>&quot; parse special text in the templates after the read - this MUST be after the autocmd to load the template
autocmd BufNewFile * %substitute#\[:VIM_EVAL:\]\(.\{-\}\)\[:END_EVAL:\]#\=eval(submatch(1))#ge
</code></pre></li>
</ul>

<p>Hope this offers help to someone.</p>

<p>Enjoy
-g-</p>

<p>&rdquo; parse special text in the templates after the read
  autocmd BufNewFile * %substitute#[:VIM_EVAL:](.{-})[:END_EVAL:]#\=eval(submatch(1))#ge</p>

<!--more-->
					</section>


					





<section class="author">
<h4><a href="https://www.companionway.net">Geoff McNamara</a></h4>

<p>“Do not meddle in the affairs of wizards, for they are subtle and quick to anger.” J.R.R Tolkien</p>

<div class="author-meta">

<i class="fa fa-map-marker"></i>

<span class="author-location">Elizabeth City, NC
</span>


<i class="fa fa-link"></i>
<span class="author-link"><a href="https://www.companionway.net">https://www.companionway.net</a></span>


</div>
</section>



					
<section class="share">

	<h4>Share this post</h4>
    
    <a class="bloglogo" href="https://twitter.com/geoffmcnamara" target="_blank">
        <i class="fab fa-twitter fa-1x" style="color:green;"></i>
    </a>
    &nbsp;
    

    
	 <a class="bloglogo" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.companionway.net%2fpost%2fvim_scriptable_templates%2f">
		<i class="fab fa-facebook fa-1x" style="color:blue;"></i>
	</a>
    &nbsp;
    

    
	 <a class="bloglogo" href="https://www.linkedin.com/in/companionway" target="_blank">
        <i class="fab fa-linkedin fa-1x" style="color:red;"></i>
    </a>
    &nbsp;
    


    
    <a class="bloglogo" href="https://github.com/geoffmcnamara" target="_blank">
        <i class="fab fa-github fa-1x" style="color:orange;"></i>
    </a>
    &nbsp;
    


</section>



					

<div id="disqus_thread"></div>
<i class="fa fa-comment"></i>



	<script type="text/javascript">
		



(function() { 
	var d = document, s = d.createElement('script');
	s.src = 'https://companionway-net.disqus.com/embed.js';
	s.setAttribute('data-timestamp', +new Date());
	(d.head || d.body).appendChild(s);
})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

	
	


				</article>

			</main>
            


<hr>
<div class="row" id="partial_gads_html">
  <center>
    
        <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-6986704271237340"
            data-ad-slot="6884077067"
            data-ad-format="auto">
        </ins>
    

    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </center>
</div>
<hr>

			
<script type="text/javascript" src="https://www.companionway.net/js/jquery.js"></script>
<script type="text/javascript" src="https://www.companionway.net/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="https://www.companionway.net/js/index.js"></script>
<script type="text/javascript" src="https://www.companionway.net/js/bootstrap.min.js"></script>
<script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script>
<script type="text/javascript" src="https://www.companionway.net/js/custom.js"></script>
<script id="dsq-count-scr" src="//companionway-net.disqus.com/count.js" async></script>




<section class="share">
<hr>
	<center>
	<h4>Credits:</h4>
	
	<a href="https://www.netlify.com">
	  <img src="https://www.netlify.com/img/global/badges/netlify-color-bg.svg" height="62" title="netlify"/>
	</a>

	
	<a href="http://www.hugo.org">
        <img src="https://www.companionway.net/img/hugo-logo.png" height="62" title="Hugo"/>
	</a>

	
	<a href="https://github.com/w0rp/ale">
    <img src="https://www.companionway.net/img/ale-logo.jpg" height="62" title="vim Ale"/>
	</a>

	
	<a href="http://www.fabfile.org">
	  <img src="https://www.companionway.net/img/fabric-logo.png" height="62" title="Python Fabric"/>
	</a>

	

	
	<a href="https://github.com">
	  <img src="https://www.companionway.net/img/github-logo.jpg" height="62" title="github"/>
	</a>


	
  <a href="https://git-scm.com"/>
    <img src="https://www.companionway.net/img/git-logo.png" height="62" title="git"/>
	</a>

	
  <a href="https://codepen.io/"/>
    <img src="https://www.companionway.net/img/codepen-logo.png" height="62" title="codepen"/>
	</a>

	
	</center>
<hr>
</section>



<footer class="site-footer clearfix">
	<center>
		<div id="site-footer">
			<hr style="padding: 0px; margin: 0px;">
			<span>Powered by <a href="https://gohugo.io/">Hugo</a>.</span>
			<span>
				
				All rights reserved - companionway - 2016
				
			</span>
			<hr style="padding: 0px; margin: 0px;">
		</div>
	</center>
	

</footer>
</div> 
</body>
</html>

