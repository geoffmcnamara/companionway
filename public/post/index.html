<!DOCTYPE html>
<html lang="en-us">
	<head>

		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />

		


    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image" content="/img/rpi-card-dark-crop.jpg"/>



<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content="Meeting challenges with success!"/>

    <meta name="twitter:site" content="@@geoffmcnamara"/>



		<meta property="og:title" content=" Posts &middot;  companionway" />
		<meta property="og:site_name" content="companionway" />
		<meta property="og:url" content="/post/" />

		
		<meta property="og:type" content="website" />
		

		<title>
			 Posts &middot;  companionway
		</title>

		<meta name="description" content="Meeting challenges with success!" />

		<meta name="HandheldFriendly" content="True" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<link rel="shortcut icon" href="/images/favicon.ico">
		<link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />


    

<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="/css/screen.css" />
<link rel="stylesheet" type="text/css" href="/css/nav.css" />


<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />





    

		
		
		<link href="/index.xml" rel="alternate" type="application/rss+xml" title="companionway" />
		
		
		<link href="/post/index.xml" rel="alternate" type="application/rss+xml" title="Posts &middot; companionway" />
		
		
		<meta name="generator" content="Hugo 0.16-DEV" />

		<link rel="canonical" href="/post/" />

    <link ref="stylesheet" type="text/css" href='http://fonts.googleapis.com/css?family=EB+Garamond' >
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Architects Daughter" >
<link rel="stylesheet" type="text/css" href='http://fonts.googleapis.com/css?family=Tangerine|Open+Sans:300' >
<link rel="stylesheet" type="text/css" href='http://fonts.googleapis.com/css?family=Philosopher'>



		
		<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-6970218-1', 'auto');
ga('send', 'pageview');

		</script>
		

		
	</head>
	<body class="nav-closed">

		<div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/">Home</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/post">Posts</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/page/about/">About</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/page/links/">Links</a>
            </li>
        
    </ul>
    
    
    <a class="subscribe-button icon-feed" href="/post/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


	<div class="site-wrapper">




	 
  <header class="main-header tag-head" style="background-image: url(/img/rpi-card-dark-crop.jpg)">
  

    <nav class="main-nav overlay clearfix">
      
      
          <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
      
    </nav>
    <div class="vertical">
        <div class="main-header-content inner">
            <h1 class="page-title">Posts</h1>
            <h2 class="page-description">
                
            </h2>
        </div>
    </div>
</header>

<main class="content" role="main">
    

	<div class="extra-pagination inner">
    <nav class="pagination" role="navigation">
	
	<span class="page-number">Page 1 of 3</span>
	
	    <a class="older-posts" href="/post/page/2/">Older Posts &rarr;</a>
	
</nav>

	</div>

	
	   
<article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/post/quick-n-dirty-python-debug-function/">Quick N Dirty Python Debug Function</a></h2>
    </header>
    <section class="post-excerpt">
        <p><p>Pdb is a great debugger for python but I like to use my own simple debug functions.
Here is a simple debug function for python which could definitely be improved:</p>

<pre><code class="language-python">#!/usr/bin/env python

import os
import sys
from inspect import (getframeinfo, currentframe, getouterframes)


DBUG=2 # will print to stdout if set to 1 -- use 2 to add funcname and funcdocs
#DLOG=os.path.basename(sys.argv[0])+&quot;.log&quot; # will append to log to file if this is not commented out

def dbug(msg):
  &quot;&quot;&quot;
   At the top of your script set these global values:
    from inspect import (getframeinfo, currentframe, getouterframes)
    DBUG=2 # will print to stdout if set to 1 -- use 2 to add funcname and funcdocs
    #DLOG=os.path.basename(sys.argv[0])+&quot;.log&quot; # will append to log to file if this is not commented out
   Function: dbug() will print (or log) DEBUG: (datetime) [lineno] msg
   print this function doc with CLI help(dbug) or CODE dbug.__doc__
   needs: from inspect import currentframe.
   Simple to use... dbug(&quot;my message here&quot;)
   &quot;&quot;&quot;

  cf = currentframe()
  msg=&quot;DEBUG: [&quot;+str(cf.f_back.f_lineno)+&quot;] &quot;+msg

  try:
    if DBUG==2:
      fname=str(getframeinfo(currentframe().f_back).function)
      fdoc=eval(fname+.__doc__
      fdoc=fdoc if fdoc else 'undocumented'
      msg=msg+&quot; Func: &quot;+fname+&quot; Doc: &quot;+fdoc
  except:
    pass

  try:
    if DLOG != &quot;&quot;:
      fh_dbug=open(DLOG,&quot;a&quot;)
      fh_dbug.write(dtime+&quot; &quot;+msg+&quot;\n&quot;)
      fh_dbug.close
  except:
    pass

  try:
    if DBUG&gt;=0:
      print msg
  except:
    pass

def myFunc(myvar=&quot;eulav&quot;):
  &quot;&quot;&quot;
   myFunc(&quot;something&quot;) -requires one string
   prints out the string backwards - it uses the extended slice operator
   ie [begin:end:step]
   The default here prints &quot;value&quot;
  &quot;&quot;&quot;
  dbug(&quot;how does it work&quot;)
  print myvar[::-1]

### Main Code ###
if __name__ == '__main__':
  dbug(&quot;Please note that the name of this function is dbug -- not debug just to avoid conflicts elsewhere&quot;)

  dbug(&quot;How does this work?&quot;)
  myFunc(&quot;this is my string&quot;)

  DBUG=1
  dbug(&quot;And now the reverse&quot;)
  myFunc(&quot;gnirts ym si siht&quot;)

  dbug(&quot;Let see what the default is...&quot;)
  myFunc() # reverses the default
### EOF ####
'''

Output from this should look something like this:
</code></pre>

<p>DEBUG: [97] Please note that the name of this function is dbug &ndash; not debug just to avoid conflicts elsewhere
DEBUG: [98] How does this work?
DEBUG: [92] how does it work Func: myFunc Doc:
   myFunc(&ldquo;something&rdquo;) -requires one string
   prints out the string backwards - it uses the extended slice operator
   ie [begin:end:step]
   The default here print &ldquo;value&rdquo;</p>

<p>gnirts ym si siht
DEBUG: [102] And now the reverse
DEBUG: [92] how does it work
this is my string
DEBUG: [105] Let see what the default is&hellip;
DEBUG: [92] how does it work
value
```</p>

<p>Enjoy!
-g-</p>

<p>###</p>
 <a class="read-more" href="/post/quick-n-dirty-python-debug-function/">&raquo;</a></p>
    </section>
    <footer class="post-meta">
        
        

        
        
            Geoff McNamara
        
        
        <time class="post-date" datetime="2016-12-22T14:08:05-05:00">
            22 Dec 2016
        </time>
    </footer>
</article>

	
	   
<article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/post/raspberry-pi-and-xrdp/">Raspberry Pi and Xrdp</a></h2>
    </header>
    <section class="post-excerpt">
        <p><p>I decided to have some remote desktop fun with one of my raspberry pies. Remote desktop for the raspberry pi (or
any linux machine) can be done so many different ways - but the easiest from my perspective is xrdp. It is available
really on any linux distro and works with Windows remote desktop protocol (kinda). It requires that you install
xrdp and tightvncserver (under the covers it uses a vnc server - thightvncserver is probably the best choice here).
Then as a client on my laptop I use the very good remote desktop client called remmina; again it is availalbe on
almost any linux distro.</p>
 <a class="read-more" href="/post/raspberry-pi-and-xrdp/">&raquo;</a></p>
    </section>
    <footer class="post-meta">
        
        

        
        
            Geoff McNamara
        
        on
            
                <a href="/tags/raspberry/">#raspberry</a>,
            
                <a href="/tags/rdp/">#rdp</a>,
            
        
        <time class="post-date" datetime="2016-12-16T12:27:36-05:00">
            16 Dec 2016
        </time>
    </footer>
</article>

	
	   
<article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/post/sometimes-it-is-the-obvious/">Sometimes It Is The Obvious</a></h2>
    </header>
    <section class="post-excerpt">
        <p><p>This was one of those &ldquo;problems&rdquo; that nagged me for many hours until the obvious dawned on me.
I wrote a python script to grab the temperature and humidiy from a DHT22 sensor and then write the
output with the proper syntax to send to my monitoring program [xymon]. The wrapper bash script ran
every 5 minutes and used a redirection to write out a file ie:</p>

<pre><code>*/5 * * * * /usr/local/bin/temphum.sh &gt;/tmp/temphum.dat
</code></pre>

<p>The wrapper script grabs output and sends it to the server. Having this wrapper script lets me run the
python script independantly for testing or for curiousity.</p>
 <a class="read-more" href="/post/sometimes-it-is-the-obvious/">&raquo;</a></p>
    </section>
    <footer class="post-meta">
        
        

        
        
            Geoff McNamara
        
        on
            
                <a href="/tags/scripting/">#scripting</a>,
            
                <a href="/tags/python/">#python</a>,
            
        
        <time class="post-date" datetime="2016-12-15T16:36:42-05:00">
            15 Dec 2016
        </time>
    </footer>
</article>

	
	   
<article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/post/alway-use-visudo/">Always Use Visudo</a></h2>
    </header>
    <section class="post-excerpt">
        <p><blockquote>
<blockquote>
<p>&ldquo;Familiarity breeds contempt&rdquo;</p>
</blockquote>
</blockquote>

<p>I get very comfortable with using the vim editor (take cover&hellip; flame way ensuing) so
comfortable that using any other editor leaves me just a bit unnerved. I constantly use it
to update sudoers. The best way to modify sudoers is to add a supplimental inclusion file under
/etc/sudoers.d/whatevername - so the other day I needed to add an entry to allow the user for my
simple monitoring program (xymon) to be able to run &ldquo;sudo ufw status&rdquo; without a password and report
back to the monitor server.</p>

<p>I fired up <code>sudo vim /etc/sudoers.d/xymon</code> and started to add the needed line:
<code>xymon ALL = NOPASSWD: /usr/sbin/ufw status</code> but I got halfway through and could remember the exact location</p>
 <a class="read-more" href="/post/alway-use-visudo/">&raquo;</a></p>
    </section>
    <footer class="post-meta">
        
        

        
        
            Geoff McNamara
        
        on
            
                <a href="/tags/sudo/">#sudo</a>,
            
        
        <time class="post-date" datetime="2016-12-14T10:59:38-05:00">
            14 Dec 2016
        </time>
    </footer>
</article>

	
	   
<article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/post/recursive-replace-text/">Recursively Replace Text</a></h2>
    </header>
    <section class="post-excerpt">
        <p><p>Recently I had to do a find and replace text on multiple files recursively. I had to look up how to do it to remind myself of the exact syntax. If I had to look it up, you have to suffer seeing it in my blog post&hellip; <smile></p>

<pre><code>find ./ -name \*.md -print0 | xargs -0 sed -i 's/header-img/img/'
</code></pre>

<p>Be careful here. I used the -0 option to deal with any filename that have spaces in the name BUT it really requires that the find command contain the -print0 option otherwise things will not operate in the manner expected.</p>
 <a class="read-more" href="/post/recursive-replace-text/">&raquo;</a></p>
    </section>
    <footer class="post-meta">
        
        

        
        
            Geoff McNamara
        
        on
            
                <a href="/tags/xargs/">#xargs</a>,
            
                <a href="/tags/sed/">#sed</a>,
            
        
        <time class="post-date" datetime="2016-12-10T20:38:12-05:00">
            10 Dec 2016
        </time>
    </footer>
</article>

	
	   
<article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/post/Switched-to-Hugo/">Switched to Hugo</a></h2>
    </header>
    <section class="post-excerpt">
        <p><p>I am swtiching from jekyll to hugo for flat file for a Content Managment System (CMS).
<a href="https://gohugo.io"><img src="/img/hugo-h.jpg" alt="alt text" title="goHugo.io" /></a></p>

<p>Here is why:</p>

<ul>
<li>It comes as a binary file that runs on pretty much any platform. A single file&hellip; without a list of dependencies</li>
<li>I could stop with the last reason and it would be enough&hellip; but I have to say that the file tree used in hugo is simple, and simple is beautiful. As Einstein once said:
&gt;“Make things as simple as possible, but not simpler.”</li>
<li>It is written in googles go language&hellip; so it is fast and portable.</li>
<li>It is closely tied to git so it can easily be used on github and for version maintence.</li>
<li>it builds a clean directory [./public/] for the full site deploy and this can be rsync&rsquo;d to where ever you like.
or &hellip; just git push it to hithub and use something like netlify.com to host from your github!</li>
<li><em>No frustrating</em> version incompatiblities (or at least very minimal) - unlike jekyll which seemed to break on me every few months.</li>
<li>hugo is relatively mature and has a huge developer backing.</li>
<li>configurable and changed without challenges</li>
<li>lots of themes to choose from</li>
<li>as the Hugo websites states - it makes the web fun again&hellip;</li>
<li>Did I mention that it is a single executable file?</li>
</ul>

<p>Reference:
<a href="https://gohugo.io/#intro">gohugo.io</a></p>
 <a class="read-more" href="/post/Switched-to-Hugo/">&raquo;</a></p>
    </section>
    <footer class="post-meta">
        
        

        
        
            Geoff McNamara
        
        on
            
                <a href="/tags/hugo/">#hugo</a>,
            
                <a href="/tags/jekyll/">#jekyll</a>,
            
                <a href="/tags/cms/">#cms</a>,
            
        
        <time class="post-date" datetime="2016-12-09T10:57:45-05:00">
            9 Dec 2016
        </time>
    </footer>
</article>

	
	   
<article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/post/Converting-Images/">Converting Images</a></h2>
    </header>
    <section class="post-excerpt">
        <p>I have fought with trying to remember the syntax for Imagemagik&rsquo;s convert command for years. I finaly caved in [from my normal position of &ldquo;if you can&rsquo;t do it from the commandline, then you are a wimp&rdquo; and sought out a gui to help me quickly convert images to use on a website. Or to just roll a picture 90 or 180 degrees. The easy solution and a standard ubuntu repository file is &ldquo;converseen&rdquo;. <a class="read-more" href="/post/Converting-Images/">&raquo;</a></p>
    </section>
    <footer class="post-meta">
        
        

        
        
            Geoff McNamara
        
        on
            
                <a href="/tags/convert/">#convert</a>,
            
        
        <time class="post-date" datetime="2016-12-06T11:58:20-05:00">
            6 Dec 2016
        </time>
    </footer>
</article>

	
	   
<article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/post/2015-05-11-post1/">shell/bash uppercase arguments</a></h2>
    </header>
    <section class="post-excerpt">
        <p><p>To make a long story short&hellip;</p>

<pre><code>#!/bin/bash
PATTERN=$(echo $1 | tr [:lower:] [:upper:])
# or
PATTERN=$(echo $1 | tr [a-z] [A-Z])
# or
PATTERN=$(echo $1 | awk '{print toupper($0)}')

echo &quot;Your \$1 argument is now uppercase: $1&quot;
</code></pre>

<p>To make a short story long&hellip;</p>

<p>Just to let you know a little more about me and reveal
a few more shells tricks along the way.</p>
 <a class="read-more" href="/post/2015-05-11-post1/">&raquo;</a></p>
    </section>
    <footer class="post-meta">
        
        
            
            
        

        
        
            Geoff McNamara
        
        on
            
                <a href="/tags/scripting/">#scripting</a>,
            
                <a href="/tags/financial/">#financial</a>,
            
        
        <time class="post-date" datetime="2015-05-11T00:00:00Z">
            11 May 2015
        </time>
    </footer>
</article>

	
	   
<article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/post/grovepi/">The GrovePi kit</a></h2>
    </header>
    <section class="post-excerpt">
        <p><h1 id="check-out-grovepi:83c031248d66ea65300901b7302784b2">Check out GrovePi</h1>

<p>These kits make working with the Raspberry Pi GPIO pins
so simple and clean.  I just ordered one of these kits and
I will try to write up a review after I work it over.</p>

<p>If you are interested in building a quick and easy raspberry pi
for experimenting with the &ldquo;Internet of Things&rdquo; (aka IoT) platform - this board and kit
looks like it will get you there in minutes. Approx: $89 -
includes board, and <em>lots</em> of sensors/accessories with wires
and connectors.</p>

<p><img src="/img/grovepi1.jpg" alt="grovepi" /></p>
 <a class="read-more" href="/post/grovepi/">&raquo;</a></p>
    </section>
    <footer class="post-meta">
        
        
            
            
        

        
        
            Geoff McNamara
        
        on
            
                <a href="/tags/grovepi/">#grovepi</a>,
            
        
        <time class="post-date" datetime="2015-05-09T00:00:00Z">
            9 May 2015
        </time>
    </footer>
</article>

	
	   
<article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/post/2015-05-02-post1/">How to print the remainder of a line using awk</a></h2>
    </header>
    <section class="post-excerpt">
        <p><p>#How to print remainder of line using awk</p>

<h2 id="eliminate-the-first-x-columns:2c0617bf3b5ab6328428ad749a5685c3">eliminate the first X columns&hellip;</h2>

<p>Here is your challenge you have a list of cronjobs and you
want to just execute the scheduled backup command with its
arguments for a test run.</p>

<p>Using one command line, how would you do it?</p>

<p>Here is a sample root cronjob and I want to run the
first entry with its arguments as a test run:</p>

<pre><code># m h  dom mon dow   command
 0 16  *   *   * /data/share/home/geoffm/dev/utils/bak-it.sh -i /usr/local/etc/include.lst -e /usr/local/etc/exclude.lst -t /data/bak/`hostname` -s 7 &gt;/dev/null 2&gt;&amp;1
  5 0  *   *   * /data/share/motion/arch-files.sh &gt;/dev/null 2&gt;&amp;1
*/15 *  *   *   * /data/share/home/geoffm/grab-pic.sh &gt;/dev/null 2&gt;&amp;1
####### below are WIP or OLD ########
# 16 6  *   *   * /usr/sbin/lynis -c --auditor &quot;automated&quot; --cronjob --quiet &gt;/dev/null 2&gt;&amp;1
#*/5 *  *   *   * /usr/local/bin/watch-proc.sh -f /usr/local/etc/watch-proc.conf -n geoffm@localhost &gt;/dev/null 2&gt;&amp;1
#*/5 * * * * /data/share/home/geoffm/ping-pong.sh &quot;ping -c2 192.168.1.55&quot; &quot;ssh 192.168.1.1 reboot&quot; &gt;/dev/null
#  7 * * * /usr/local/sbin/postfix_report.sh &amp;&gt; /dev/null
</code></pre>
 <a class="read-more" href="/post/2015-05-02-post1/">&raquo;</a></p>
    </section>
    <footer class="post-meta">
        
        
            
            
        

        
        
            Geoff McNamara
        
        on
            
                <a href="/tags/awk/">#awk</a>,
            
        
        <time class="post-date" datetime="2015-05-02T00:00:00Z">
            2 May 2015
        </time>
    </footer>
</article>

	

	<nav class="pagination" role="navigation">
	
	<span class="page-number">Page 1 of 3</span>
	
	    <a class="older-posts" href="/post/page/2/">Older Posts &rarr;</a>
	
</nav>

</main>




<script type="text/javascript" src="/js/jquery.js"></script>
<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>
<script type="text/javascript" src="/js/bootstrap.min..js"></script>
<script type="text/javascript" src="/js/npm.js"></script>
<script type="text/javascript" src="/js/custom.js"></script>





<footer class="site-footer clearfix">
          <center>
          <div id="site-footer">
            <hr style="padding: 0px; margin: 0px;">
            <span>Powered by <a href="https://gohugo.io/">Hugo</a>.</span>
            <span>
              
              All rights reserved - companionway - 2016
              
            </span>
            <hr style="padding: 0px; margin: 0px;">
          </div>
          </center>
     

</footer>
</body>
</html>
