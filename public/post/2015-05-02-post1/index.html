<!DOCTYPE html>
<html lang="en-US">
	<head>

		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />

		




<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://www.companionway.net/img/thrutheseaoats-dark.jpg" />




<meta name="twitter:title" content="How to print the remainder of a line using awk" />
<meta name="twitter:description" content="#How to print remainder of line using awk

eliminate the first X columns&hellip;

Here is your challenge you have a list of cronjobs and you
want to just execute the scheduled backup command with its
arguments for a test run.

Using one command line, how would you do it?

Here is a sample root cronjob and I want to run the
first entry with its arguments as a test run:

# m h  dom mon dow   command
 0 16  *   *   * /data/share/home/geoffm/dev/utils/bak-it.sh -i /usr/local/etc/include.lst -e /usr/local/etc/exclude.lst -t /data/bak/`hostname` -s 7 &gt;/dev/null 2&gt;&amp;1
  5 0  *   *   * /data/share/motion/arch-files.sh &gt;/dev/null 2&gt;&amp;1
*/15 *  *   *   * /data/share/home/geoffm/grab-pic.sh &gt;/dev/null 2&gt;&amp;1
####### below are WIP or OLD ########
# 16 6  *   *   * /usr/sbin/lynis -c --auditor &quot;automated&quot; --cronjob --quiet &gt;/dev/null 2&gt;&amp;1
#*/5 *  *   *   * /usr/local/bin/watch-proc.sh -f /usr/local/etc/watch-proc.conf -n geoffm@localhost &gt;/dev/null 2&gt;&amp;1
#*/5 * * * * /data/share/home/geoffm/ping-pong.sh &quot;ping -c2 192.168.1.55&quot; &quot;ssh 192.168.1.1 reboot&quot; &gt;/dev/null
#  7 * * * /usr/local/sbin/postfix_report.sh &amp;&gt; /dev/null
" />



		<meta property="og:title" content=" How to print the remainder of a line using awk &middot;  companionway" />
		<meta property="og:site_name" content="companionway" />
		<meta property="og:url" content="https://www.companionway.net/post/2015-05-02-post1/" />

		
		<meta property="og:type" content="article" />
		<meta property="og:article:published_time" content="2015-05-02T00:00:00Z" />
		
		<meta property="og:article:tag" content="awk" />
		
		

		<title>
			 How to print the remainder of a line using awk &middot;  companionway
		</title>

		<meta name="description" content="Meeting challenges with success!" />
		<meta name="HandheldFriendly" content="True" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="shortcut icon" href="https://www.companionway.net/img/favicon.ico">
		<link rel="apple-touch-icon" href="https://www.companionway.net/img/apple-touch-icon.png" />

		
<link rel="stylesheet" type="text/css" href="https://www.companionway.net/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="https://www.companionway.net/css/nav.css" />
<link rel="stylesheet" type="text/css" href="https://www.companionway.net/css/screen.css" />
<link rel="stylesheet" type="text/css" href="https://www.companionway.net/css/custom.css" />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

		

		
		
		<link href="https://www.companionway.netindex.xml" rel="alternate" type="application/rss+xml" title="companionway" />
		
		
		
		<meta name="generator" content="Hugo 0.51" />

		<link rel="canonical" href="https://www.companionway.net/post/2015-05-02-post1/" />

		
<link ref="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=EB+Garamond" >
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Architects Daughter" >
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Tangerine|Open+Sans:300" >
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Philosopher">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Merriweather">



		
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
					m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-6970218-1', 'auto');
ga('send', 'pageview');

		</script>
		

		
	</head>
	<body class="nav-closed">

		<div class="nav">
	<h3 class="nav-title">Menu</h3>
	<a href="#" class="nav-close">
		<span class="hidden">Close</span>
	</a>
	<ul>
		

		
		
		<li class="nav-opened" role="presentation">
			<a href="../../">Home</a>
		</li>
		
		
		<li class="nav-opened" role="presentation">
			<a href="./post">Posts</a>
		</li>
		
		
		<li class="nav-opened" role="presentation">
			<a href="../../page/about/">About</a>
		</li>
		
		
		<li class="nav-opened" role="presentation">
			<a href="../../page/links/">Links</a>
		</li>
		
		
		<li class="nav-opened" role="presentation">
			<a href="../../articles/">Newspaper</a>
		</li>
		
		
		<li class="nav-opened" role="presentation">
			<a href="../../page/projects/">Projects</a>
		</li>
		
	</ul>

	
<a class="subscribe-button icon-feed" href="https://www.companionway.netindex.xml">Subscribe</a>

</div>
<span class="nav-cover"></span>


		<div class="site-wrapper">





	<header class="main-header post-head" style="background-image: url(https://www.companionway.net/img/thrutheseaoats-dark.jpg)">
		
		<nav class="main-nav overlay clearfix">
			

					
					<a class="blog-logo" href="https://www.companionway.net"><img src="https://www.companionway.net/img/sailboat.png" alt="Home" /></a>
					
					
					<a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
					
				</nav>
			</header>



			<main class="content" role="main">




				<article class="post">

					<header class="post-header">
						<h1 class="post-title">
							
							How to print the remainder of a line using awk
							
						</h1>
						<small></small>

						<section class="post-meta">
							
							<time class="post-date" datetime="2015-05-02T00:00:00Z">
								May 2, 2015
							</time>
							
							
							<span class="post-tag small"><a href="https://www.companionway.nettags/awk/">#awk</a></span>
							
						</section>
					</header>

					<section class="post-content">
						<p>#How to print remainder of line using awk</p>

<h2 id="eliminate-the-first-x-columns">eliminate the first X columns&hellip;</h2>

<p>Here is your challenge you have a list of cronjobs and you
want to just execute the scheduled backup command with its
arguments for a test run.</p>

<p>Using one command line, how would you do it?</p>

<p>Here is a sample root cronjob and I want to run the
first entry with its arguments as a test run:</p>

<pre><code># m h  dom mon dow   command
 0 16  *   *   * /data/share/home/geoffm/dev/utils/bak-it.sh -i /usr/local/etc/include.lst -e /usr/local/etc/exclude.lst -t /data/bak/`hostname` -s 7 &gt;/dev/null 2&gt;&amp;1
  5 0  *   *   * /data/share/motion/arch-files.sh &gt;/dev/null 2&gt;&amp;1
*/15 *  *   *   * /data/share/home/geoffm/grab-pic.sh &gt;/dev/null 2&gt;&amp;1
####### below are WIP or OLD ########
# 16 6  *   *   * /usr/sbin/lynis -c --auditor &quot;automated&quot; --cronjob --quiet &gt;/dev/null 2&gt;&amp;1
#*/5 *  *   *   * /usr/local/bin/watch-proc.sh -f /usr/local/etc/watch-proc.conf -n geoffm@localhost &gt;/dev/null 2&gt;&amp;1
#*/5 * * * * /data/share/home/geoffm/ping-pong.sh &quot;ping -c2 192.168.1.55&quot; &quot;ssh 192.168.1.1 reboot&quot; &gt;/dev/null
#  7 * * * /usr/local/sbin/postfix_report.sh &amp;&gt; /dev/null
</code></pre>

<p>Here is how I would do it:</p>

<pre><code>sudo $(sudo crontab -l | awk '/bak-it/{$1=$2=$3=$4=$5=&quot;&quot;;print $0}')
</code></pre>

<p>Examining this we first see this <code>$(...)</code> structure which tells
the shell to run whatever exists between the parens and replace the
output right there. So first we call sudo crontab -l in order to
make sure we get root&rsquo;s crontab listed. The output is piped into
awk where we give it a regex to search for in each string (ie /bak-it/).
The trick here is we tell awk to make the first variable in the string
equal to the second&hellip; equal to the 3rd, 4th and 5th, and finally = &ldquo;&rdquo;.
This effectively substitutes and empty string for the first 5 variables
leaving the remained of the line which then gets printed with the
<code>print $0</code>. Actually you can leave off the <code>$0</code> because awk will default
to that if you just use <code>print</code> alone.</p>

<p>Now there may be one more problem. If you run that command above it
will execute the intended command along with the arguments BUT it will
do it as the user who ran it. Obviously, if the commands come from the
root crontab it may not run properly for another user.</p>

<p>I will leave it as an exercise for the reader to solve that problem.</p>
					</section>


					





<section class="author">
<h4><a href="https://www.companionway.net">Geoff McNamara</a></h4>

<p>“Do not meddle in the affairs of wizards, for they are subtle and quick to anger.” J.R.R Tolkien</p>

<div class="author-meta">

<i class="fa fa-map-marker"></i>
blah

<span class="author-location">Elizabeth City, NC
</span>

<i class="fa fa-link"></i>
<span class="author-link"><a href="https://www.companionway.net">https://www.companionway.net</a></span>


</div>
</section>



					
<section class="share">

	<h4>Share this post</h4>
	<a class="Xicon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=How%20to%20print%20the%20remainder%20of%20a%20line%20using%20awk&nbsp;-&nbsp;companionway&amp;url=https%3a%2f%2fwww.companionway.net%2fpost%2f2015-05-02-post1%2f"
																										onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
		<span class="hidden">Twitter</span>
		<i class="fa fa-twitter fa-1x" style="color:yellow;"></i>
	</a>

	<a class="Xicon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.companionway.net%2fpost%2f2015-05-02-post1%2f"
																										 onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
		<span class="hidden">Facebook</span>
		<i class="fa fa-facebook fa-1x" style="color:green;"></i>
	</a>

	

	
	 </a>

	 <a class="Xicon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fwww.companionway.net%2fpost%2f2015-05-02-post1%2f"
																												 onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
		 <span class="hidden">Google+</span>
		 <i class="fa fa-google-plus fa-1x" style="color:red;"></i>
	 </a>

</section>



					

<div id="disqus_thread"></div>
<i class="fa fa-comment"></i>



	<script type="text/javascript">
		



(function() { 
	var d = document, s = d.createElement('script');
	s.src = 'https://companionway-net.disqus.com/embed.js';
	s.setAttribute('data-timestamp', +new Date());
	(d.head || d.body).appendChild(s);
})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

	
	


				</article>

			</main>
			
<script type="text/javascript" src="https://www.companionway.net/js/jquery.js"></script>
<script type="text/javascript" src="https://www.companionway.net/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="https://www.companionway.net/js/index.js"></script>
<script type="text/javascript" src="https://www.companionway.net/js/bootstrap.min.js"></script>
<script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script>
<script type="text/javascript" src="https://www.companionway.net/js/custom.js"></script>
<script id="dsq-count-scr" src="//companionway-net.disqus.com/count.js" async></script>



<footer class="site-footer clearfix">
	<center>
		<div id="site-footer">
			<hr style="padding: 0px; margin: 0px;">
			<span>Powered by <a href="https://gohugo.io/">Hugo</a>.</span>
			<span>
				
				All rights reserved - companionway - 2016
				
			</span>
			<hr style="padding: 0px; margin: 0px;">
		</div>
	</center>
	

</footer>
</div> 
</body>
</html>

